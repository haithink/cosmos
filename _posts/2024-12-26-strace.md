---
title: "strace的使用"
date: 2024-12-06
tags: [strace, linux, 调试]
---

2024-12-09 10:26:33

最近需要简单某个进程为何加载SNPE DSP运行时失败，一开始尝试过用IDA PRO静态分析，发现的确是在加载(dlopen)特定的一些库，解决了使用SNPEv1的时候碰到的一些问题。但也仅此而已，为什么使用SNPE V2 运行时库加载失败？还是不得而知。
通过AI得知可以用strace分析，然后初步使用了下，发现的确牛逼，它监控了一个进程的全部系统调用，这样就能知道加载了哪些库了，可以看到程序运行的时候去一些特定路径加载一些库，但失败了，导致运行时加载失败。

但仍然碰到两个问题。第一，即使是在加载成功的情况下，strace日志里面也没发现运行时库的名字。第二，经常出现日志很少的情况。

经过一些摸索发现了问题。第一个问题是需要使用 **-f** 参数，这样会跟踪fork出的子进程的系统调用信息；第二个问题则是要让被监控进程结束，无论正常结束还是强制结束，这样就能得到全部日志信息了，估计是strace缓存了太多日志导致的。


